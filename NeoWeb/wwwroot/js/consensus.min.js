function showDetail(n){n.parents(".tr-con").next(".can-detail").toggle("fast")}function blockInfo(){var n=JSON.stringify({jsonrpc:"2.0",method:"getblockcount",params:[],id:1});countDown(lastt);$.ajax({type:"POST",url:send_url,data:n,success:function(n){block_height!=n.result-1&&(lastt=new Date,block_height=n.result-1,getListdata(),$("#blohei").html(block_height))},fail:function(){getSeed()}})}function countDown(n){var t=new Date-n;if(t>=0)var u=parseInt(t/36e5%24,10),r=parseInt(t/6e4%60,10),i=parseInt(t/1e3%60,10);t<6e5?$("#lastime").html(i+"s"):t<36e5?$("#lastime").html(r+"m"+i+"s"):$("#lastime").html(u+"h"+r+"m"+i+"s")}function getListdata(){$.get("../../consensus/getvalidators",[]).done(function(n){var t=JSON.parse(n),u,r,f,e,i;if(conNum!=t.length){for(u=0,$("#cannum").html(t.length),r=0;r<t.length;r++)t[r].Active&&u++;$("#connum").html(u);f="";e="";for(i in t)t[i].Info!=null&&t[i].Info.Logo!=null&&(t[i].Info.Logo=t[i].Info.Logo.replace("~","")),t[i].Active?f+=template("consensus",t[i]):e+=template("candidate",t[i]);console.log(t);document.getElementById("conList").innerHTML=f;document.getElementById("canList").innerHTML=e;conNum=t.length}})}function getVolue(){$.get("../../consensus/gettxcount",[]).done(function(n){var t=JSON.parse(n);showCharts(t)})}function showCharts(n){var t=echarts.init(document.getElementById("main"));option={backgroundColor:"#fff",tooltip:{trigger:"axis",backgroundColor:"rgba(255,255,255,1)",borderRadius:"2",axisPointer:{lineStyle:{color:"#00af92"}},textStyle:{fontWeight:"300",fontSize:"12",color:"#505050"}},legend:{icon:"diamond",itemWidth:14,itemHeight:14,itemGap:14,data:[tx_v,block_s],right:0,textStyle:{fontSize:12,fontWeight:100,color:["#02e49b","00af92"]}},grid:{left:"0",right:"2",bottom:"0",top:"65",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{inside:!1,textStyle:{color:"#505050",fontWeight:"300",fontSize:"12",lineHeight:"40"}},data:n.IndexList}],yAxis:[{type:"value",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{margin:50,textStyle:{color:"#505050",fontWeight:"300",fontSize:"12",lineHeight:"40"}},splitLine:{lineStyle:{color:"#EAEAEA"}}},{type:"value",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{margin:50,textStyle:{color:"#505050",fontWeight:"300",fontSize:"12",lineHeight:"40"}},splitLine:{lineStyle:{color:"#EAEAEA"}}}],series:[{name:tx_v,type:"line",showSymbol:!1,yAxisIndex:0,lineStyle:{normal:{width:1,shadowColor:"rgba(80,80,80,0.1)",shadowBlur:15,shadowOffsetY:30}},itemStyle:{normal:{color:"#02e49b"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(2, 228, 155, 0.1)"},{offset:.3,color:"#fff"}])}},data:n.TxCountList},{name:block_s,type:"line",showSymbol:!1,yAxisIndex:1,lineStyle:{normal:{width:1,shadowColor:"rgba(80,80,80,0.1)",shadowBlur:15,shadowOffsetY:30}},itemStyle:{normal:{color:"#00af92"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0, 175, 146, 0.1)"},{offset:.3,color:"#fff"}])}},data:n.SizeList}]};window.onresize=t.resize;t.setOption(option)}var block_height=0,send_url="https://seed1.cityofzion.io:443",lastt=new Date,conNum=0;blockInfo();getVolue();getListdata();setInterval(function(){blockInfo()},1e3);