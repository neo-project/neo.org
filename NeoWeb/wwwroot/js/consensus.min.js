function showDetail(n){n.parents(".tr-con").next(".can-detail").toggle("fast")}function blockInfo(){var n=JSON.stringify({jsonrpc:"2.0",method:"getblockcount",params:[],id:1});countDown(lastt);$.ajax({type:"POST",url:send_url,data:n,success:function(n){block_height!=n.result-1&&(lastt=new Date,block_height=n.result-1,getListdata(),$("#blohei").html(block_height))},fail:function(){getSeed()}})}function countDown(n){var t=new Date-n;if(t>=0)var u=parseInt(t/36e5%24,10),r=parseInt(t/6e4%60,10),i=parseInt(t/1e3%60,10);t<6e5?$("#lastime").html(i+"s"):t<36e5?$("#lastime").html(r+"m"+i+"s"):$("#lastime").html(u+"h"+r+"m"+i+"s")}function getListdata(){$.get("../../consensus/getvalidators",[]).done(function(n){var t=JSON.parse(n),s,f,u,h,r,i;if(conNum!=t.length){for(s=0,$("#cannum").html(t.length),i=0;i<t.length;i++)t[i].Active&&s++;$("#connum").html(s);f="";for(u in t)if(f+=template("test",t[u]),t[u].Info!=null&&t[u].Info.SocialAccount!=null){for(h=t[u].Info.SocialAccount.split(";"),r="",i=0;i<h.length;i++){var c=h[i].split(":"),e=c[0],o=c[1];e.toLowerCase()=="twitter"&&(r+="<a href=https://twitter.com/"+o+'><i class="iconfont">&#xe60a;<\/i><\/a>');e.toLowerCase()=="facebook"&&(r+="<a href=https://www.facebook.com/"+o+'><i class="iconfont">&#xe87d;<\/i><\/a>');e.toLowerCase()=="weibo"&&(r+="<a href=https://weibo.com/"+o+'><i class="iconfont">&#xe610;<\/i><\/a>');e.toLowerCase()=="github"&&(r+="<a href=https://github.com/"+o+'><i class="iconfont">&#xee67;<\/i><\/a>')}f+='<p class="social-icon">'+r+"<p/>"}document.getElementById("tableList").innerHTML=f;conNum=t.length}})}function getVolue(){$.get("../../consensus/gettxcount",[]).done(function(n){var t=JSON.parse(n);showCharts(t)})}function showCharts(n){var t=echarts.init(document.getElementById("main"));option={backgroundColor:"#fff",tooltip:{trigger:"axis",backgroundColor:"rgba(255,255,255,1)",borderRadius:"2",axisPointer:{lineStyle:{color:"#999999"}},textStyle:{fontWeight:"normal",color:"#666666"}},legend:{icon:"rect",itemWidth:14,itemHeight:14,itemGap:14,data:[tx_v,block_s],right:"0",textStyle:{fontSize:12,color:"#666666"}},grid:{left:"0",right:"0",bottom:"0",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#CCC",opcity:"0.8"}},data:n.IndexList}],yAxis:[{type:"value",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{margin:10,textStyle:{color:"#CCC",fontSize:14}},splitLine:{lineStyle:{color:"#EAEAEA"}}},{type:"value",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{margin:10,textStyle:{color:"#CCC",fontSize:14}},splitLine:{lineStyle:{color:"#EAEAEA"}}}],series:[{name:tx_v,type:"line",smooth:!0,showSymbol:!1,yAxisIndex:0,lineStyle:{normal:{width:2,shadowColor:"rgba(80,80,80,0.1)",shadowBlur:15,shadowOffsetY:30}},itemStyle:{normal:{color:"rgb(200,220,25)"}},data:n.TxCountList},{name:block_s,type:"line",smooth:!0,showSymbol:!1,yAxisIndex:1,lineStyle:{normal:{width:2,shadowColor:"rgba(80,80,80,0.1)",shadowBlur:15,shadowOffsetY:30}},itemStyle:{normal:{color:"rgb(170,203,162)"}},data:n.SizeList}]};window.onresize=t.resize;t.setOption(option)}var block_height=0,send_url="https://pyrpc2.narrative.org:443",lastt=new Date,conNum=0;blockInfo();getVolue();getListdata();setInterval(function(){blockInfo()},1e3);